{% extends "base.html" %}
{% block content %}

<div class="page">

    <div class="top-bar">
        <button onclick="location.href='/'">Home</button>
    </div>

    <h1>EDID Tools</h1>

    <div class="controls">
        <label for="port">Port:</label>
        <select id="port" name="port">
            <!-- options populated by JS -->
        </select>

        <button onclick="loadConnectors(true)">↻ Refresh Ports</button>
        <button onclick="readEdid()">Read EDID</button>
        <button onclick="resetView()">Reset</button>
    </div>

    <!-- Status + match -->
    <div class="status" id="status">Idle</div>
    <div id="match" class="match"></div>

    <!-- Output -->
    <pre id="output" class="output"></pre>

    <!-- View toggle -->
    <div class="toggle">
        <label for="view-binary">
            <input id="view-binary" type="radio" name="viewMode" value="binary" checked onchange="switchView()">
            Binary
        </label>

        <label for="view-decoded">
            <input id="view-decoded" type="radio" name="viewMode" value="decoded" onchange="switchView()">
            Decoded
        </label>
    </div>

	<div class="save">
		<input id="saveFilename" type="text" placeholder="filename.bin">
		<button id="saveBtn" onclick="saveEdid()" disabled>Save EDID</button>
	</div>

	<div class="usb-section">
		<h3>USB Import / Export</h3>

		<select id="usbDrive"></select>
		<button onclick="loadUsbDrives()">↻ Refresh USB</button>

		<button onclick="importEdids()">Import from USB</button>
		<button onclick="exportEdids()">Export to USB</button>

		<div id="usbStatus"></div>
	</div>
	
</div>

<!-- Script last -->
<script src="{{ url_for('static', filename='js/edid.js') }}"></script>

{% endblock %}

